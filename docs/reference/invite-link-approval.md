# 招待リンクによる自動承認ガイド（叩き台）

本書は、招待リンクURLを開くだけでユーザー承認が完了する運用を想定したユーザーマニュアルの叩き台です。

## 1. 招待リンクの仕組み
- 招待リンクURLを開くだけでユーザー承認が完了する
- 追加の認証手順は不要

## 2. 使用方法
- 招待リンクをクリック
- 自動的にアカウントが承認される

## 3. 注意事項
- 招待リンクは1回のみ有効
- リンクの取り扱いに注意（第三者に共有しない）

---

## 補足（現在の実装との違い）

現在のアプリ実装では、招待受諾ページ（`/invite/<code>`）にてログイン済みであることが必要です。  
将来的に「リンクを開くだけで承認完了」に切り替える際は、以下のいずれかの方式が推奨です。

- Supabase のマジックリンク（Email OTP）を招待リンクに組み込み、到達時に自動ログインと受諾処理を行う
- サーバー側 RPC（`SECURITY DEFINER`）で受諾を完了させる設計に変更し、招待コードの所有者検証・期限チェック・重複防止をDB関数内で担保

セキュリティ上の配慮として、リンクの1回限り有効化、期限設定、招待者と受諾者の整合性検証、RLS/権限の適切な設定を必ず行ってください。